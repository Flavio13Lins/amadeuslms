{% extends 'subject/index.html' %}

{% load i18n widget_tweaks static django_bootstrap_breadcrumbs %}

{% block style %}
 <link rel="stylesheet" type="text/css" href="{% static 'css/exam.css' %}">
{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb 'Create exam' 'course:create_exam' %}
{% endblock breadcrumbs %}

{% block content %}
<div class="panel panel-primary">
  <div class="panel-heading">
    <h4 class="panel-title" id="exam-title">{% trans "Create a Exam" %}</h4>
  </div>
  <div class="panel-body">
    {% csrf_token %}
    {% for field in form %}
      {% if field.auto_id != 'id_begin_exam' and field.auto_id != 'id_end_exam'  and field.auto_id != 'id_begin_date' and field.auto_id != 'id_limit_date' %}
        <div class="row form-group">
          {% if field.field.required %}
            <label for="{{ field.auto_id }}" class="col-md-2 control-label">{{ field.label }}</label>
            {% else %}
            <label for="{{ field.auto_id }}" class="col-md-2 control-label">{{ field.label }}</label>
          {% endif %}
          <div class="col-md-10">
          {% if field.auto_id == 'id_all_students' %}
            {% render_field field class='form-control input-sm' %}
          {% else %}
            {% render_field field class='form-control input-sm' %}
          {% endif %}
          </div>
        </div>
      {% endif %}
    {% endfor %}
      <div class="row form-group">
        {% for field in form %}
          {% if field.auto_id == 'id_begin_date' or field.auto_id == 'id_limit_date' %}
            {% if field.field.required %}
              <label for="{{ field.auto_id }}" class="col-md-2 control-label">{{ field.label }}</label>
            {% else %}
              <label for="{{ field.auto_id }}" class="col-md-2 control-label">{{ field.label }}</label>
            {% endif %}
            <div class="col-md-4">
              {% render_field field class='form-control date-picker' %}
            </div>
          {% endif %}
        {% endfor %}
      </div>

    <div class="row form-group">
      <div class="col-md-10">
        <div class="checkbox">
          <label>
            <input type="checkbox" name="checkbox"><span class="checkbox-material"></span> {% trans "Allow submissions after deadline?" %}
          </label>
        </div>
      </div>
    </div>
    <div class="row form-group" id="buttonAddQuestion">
      <div class="col-md-10">
        <button id="addQuestion" type="button" class="btn btn-raised btn-default">Add new question buton</button>
      </div>
    </div>
  </div>
  <div class="panel-footer">
    <button type="button" class="btn btn-default btn-raised" data-dismiss="modal">{% trans "Close" %}</button>
    {% block button_save %}
    <!-- Put curtom buttons here!!!  -->
    <button type="submite" id="button" form="form" class="btn btn-primary btn-raised">{% trans "Create" %}</button>
    {% endblock button_save %}
  </div>
</div>

{% block javascript %}
  <script type="text/javascript">
    //Insert Create select with question type
    var idQuestionType = 1;
    $("#addQuestion").on("click", function(event){
      var title = '<h3 class="title-questions-exam">Choice your questions:</h3><br/>';
      var element =
      '<div class="row form-group" id="questionType_' + idQuestionType +'">' +
      '<label for="questionType" class="col-md-2 control-label">' +
      '{% trans "Question Type" %}</label>' + '<div class="col-md-10">' +
            '<select id="questionType'+ idQuestionType +'" class="form-control" name="option_question" onchange="showDiv (this, '+ idQuestionType +')">' +
              '<option selected disabled>{% trans "Question Type" %}</option>' +
              '<option value="0">{% trans "Multiple Choice" %}</option>' +
              '<option value="1">{% trans "True or False" %}</option>' +
              '<option value="2">{% trans "Gap Filling" %}</option>' +
              '<option value="3">{% trans "Discursive Question" %}</option>' +
            '</select>' +
          '</div>' +
        '</div>' + '<hr id="hr_'+idQuestionType+'">'
        ; 
        if (idQuestionType == 1){
          $(title).insertBefore('#buttonAddQuestion');
          $(element).insertBefore('#buttonAddQuestion');
        }else{  
          var idhr = '#hr_'+(idQuestionType-1);
          $(element).insertAfter(idhr);
        }
      idQuestionType++;
    })
  </script>
  <script src="{% static 'js/Exam.js' %}"></script>
  <!-- Init material Bootstrap -->
  <script type="text/javascript">$.material.init()</script><!-- O botao radio volta a funcionar quando coloco essa função-->
{% endblock %}
{% endblock content %}
