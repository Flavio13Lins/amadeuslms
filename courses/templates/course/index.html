{% extends 'home_professor.html' %}

{% load static i18n permission_tags %}
{% load django_bootstrap_breadcrumbs %}

{% block breadcrumbs %}

  {{ block.super }}
  {% breadcrumb 'Courses' 'course:manage' %}

{% endblock %}

{% block sidebar %}
	<div class="panel panel-primary navigation">
        <div class="panel-heading">
            <h5>{% trans 'Menu' %}</h5>
        </div>
        <div class="panel-body">
            <ul class="nav nav-pills nav-stacked">
                <li><a href="{% url 'users:profile' %}">{% trans 'Profile' %}</a></li>
                <li><a href="{% url 'course:manage' %}">{% trans 'My Courses' %}</a></li>
            </ul>
        </div>
    </div>

{% if user|has_role:'professor, system_admin' %}

    <div class="panel panel-primary navigation">
	    <div class="panel-heading">
	        <h3 class="panel-title">Actions</h3>
	    </div>
	    <div class="panel-body">
	        <ul class="nav nav-pills nav-stacked">
	            <li><a href="javascript:void(0)">Replicate Course</a></li>
	            <li><a href="{% url 'course:create' %}">Create Course</a></li>
	        </ul>
	    </div>
	</div>

	<div class="panel panel-primary navigation">
	    <div class="panel-heading">
	        <h3 class="panel-title">Category</h3>
	    </div>
	    <div class="panel-body">
	        <ul class="nav nav-pills nav-stacked">
	            <li><a href="{% url 'course:create_cat' %}">Create Category</a></li>
	            <li><a href="{% url 'course:manage_cat' %}">List Category</a></li>
	        </ul>
	    </div>
	</div>

{% endif %}

{% endblock %}

{% block content %}
	{% if messages %}
		{% for message in messages %}
			<div class="alert alert-success alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<p>{{ message }}</p>
			</div>
		{% endfor %}
	{% endif %}

<div class="col-md-12">
	<div class="input-group">
	  <div class="form-group is-empty"><input type="search" class="form-control" placeholder="Search Courses"></div>
	    <span class="input-group-btn input-group-sm">
	      <button type="button" class="btn btn-fab btn-fab-mini">
	        <i class="material-icons">search</i>
	      </button>
	    </span>
	</div>
</div>
	<div class="col-md-12">
		{% if user|has_role:'professor, system_admin' %}
			<div class="btn-group btn-group-justified btn-group-raised">
				<a href="?category=all" class="btn btn-raised btn-info">Todos</a>
				{% for category_course in categorys_courses_professor %}
					<a href="?category={{category_course.name}}" class="btn btn-raised btn-primary">{{category_course.name}}</a>
				{% endfor %}
			</div>
		{% else%}
			<div class="btn-group btn-group-justified btn-group-raised">
				<a href="?category=all" class="btn btn-raised btn-info">Todos</a>
				{% for category_course in categorys_courses %}
					<a href="?category={{category_course.name}}" class="btn btn-raised btn-primary">{{category_course.name}}</a>
				{% endfor %}
			</div>
		{% endif %}
	</div>

</fieldset>
{% if user|has_role:'professor, system_admin' %}
	<div class="col-md-12">
		{% if courses|length > 0 %}
			{% if request.GET.category == 'all' or none or request.GET.category == '' %}
				{% for course in courses_teacher %}
				  <!-- Put your content here! -->
		          <div class="panel-group ui-accordion ui-widget ui-helper-reset ui-sortable" id="accordion" role="tablist" aria-multiselectable="false">
		            <div class="group">
						<div class="panel panel-info">
						    <div class="panel-heading" role="tab">
						      <div class="row">
						        <div class="col-xs-9 col-md-9 titleTopic">
						          <a role="button" data-toggle="collapse" data-parent="#accordion" href=".collapseOne" aria-expanded="false" aria-controls="collapseOne" class="collapsed">
						          <h4 style="color:white">{{course.name}}</h4>
						          </a>
						        </div>
						        <div class="col-xs-4 col-md-3" id="divMoreActions">
						            <div class="btn-group">
						              <button type="button" class="btn btn-default btn-sm eye" data-toggle="tooltip" data-placement="bottom" title="Visible">
						                <i class="fa fa-eye fa-2x" aria-hidden="true"></i>
						              </button>

						            </div>
						            <div class="btn-group">
						              <button class="btn btn-default btn-sm dropdown-toggle" type="button" id="moreActions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						                <i class="fa fa-ellipsis-v fa-2x" aria-hidden="true"></i>
						              </button>
						              <ul class="dropdown-menu" aria-labelledby="moreActions">
						                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#myModal4"><i class="fa fa-files-o fa-fw" aria-hidden="true"></i>&nbsp; Replicate</a></li>
						                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#removeCourse"><i class="fa fa-trash fa-fw" aria-hidden="true"></i>&nbsp; Remove</a></li>
						              </ul>
						            </div>
						        </div>
						      </div>
						    </div>
						    <div class="panel-collapse collapseOne collapse in" role="tabpanel" aria-labelledby="headingOne" aria-expanded="true" aria-hidden="false" tabindex="0">
						      <div class="panel-body">
						        <p><b>Course Name: </b>{{course.name}}</p>
						        <p><b>Duration (in semesters): </b>09</p>
						        <p><b>Coordinator: </b>{{course.professors}}</p>
						        <p>
						          <b>Description:</b>
						          <i>
						            {{course.description}}
						          </i>
						        </p>
								<a href="{% url 'course:view' course.slug %}" class="btn btn-raised btn-default center-block">{% trans 'View Course' %}<div class="ripple-container"></div></a>
						      </div>
						    </div>
						</div>
					</div>
				</div>
				{% endfor %}
			{% else %}
				{% for course in courses_teacher %}
    				{% if course.category.name == request.GET.category %}
    					<!-- Put your content here! -->
		          <div class="panel-group ui-accordion ui-widget ui-helper-reset ui-sortable" id="accordion" role="tablist" aria-multiselectable="false">
		            <div class="group">
						<div class="panel panel-info">
						    <div class="panel-heading" role="tab">
						      <div class="row">
						        <div class="col-xs-9 col-md-9 titleTopic">
						          <a role="button" data-toggle="collapse" data-parent="#accordion" href=".collapseOne" aria-expanded="false" aria-controls="collapseOne" class="collapsed">
						          <h4 style="color:white">{{course.name}}</h4>
						          </a>
						        </div>
						        <div class="col-xs-4 col-md-3" id="divMoreActions">
						            <div class="btn-group">
						              <button type="button" class="btn btn-default btn-sm eye" data-toggle="tooltip" data-placement="bottom" title="Visible">
						                <i class="fa fa-eye fa-2x" aria-hidden="true"></i>
						              </button>

						            </div>
						            <div class="btn-group">
						              <button class="btn btn-default btn-sm dropdown-toggle" type="button" id="moreActions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						                <i class="fa fa-ellipsis-v fa-2x" aria-hidden="true"></i>
						              </button>
						              <ul class="dropdown-menu" aria-labelledby="moreActions">
						                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#myModal4"><i class="fa fa-files-o fa-fw" aria-hidden="true"></i>&nbsp; Replicate</a></li>
						                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#removeCourse"><i class="fa fa-trash fa-fw" aria-hidden="true"></i>&nbsp; Remove</a></li>
						              </ul>
						            </div>
						        </div>
						      </div>
						    </div>
						    <div class="panel-collapse collapseOne collapse in" role="tabpanel" aria-labelledby="headingOne" aria-expanded="true" aria-hidden="false" tabindex="0">
						      <div class="panel-body">
						        <p><b>Course Name: </b>{{course.name}}</p>
						        <p><b>Duration (in semesters): </b>09</p>
						        <p><b>Coordinator: </b>{{course.professors}}</p>
						        <p>
						          <b>Description:</b>
						          <i>
						            {{course.description}}
						          </i>
						        </p>
								<a href="{% url 'course:view' course.slug %}" class="btn btn-raised btn-default center-block">{% trans 'View Course' %}<div class="ripple-container"></div></a>
						      </div>
						    </div>
						</div>
					</div>
				</div>
    				{% endif %}
				{% endfor %}
			{% endif %}
		{% else %}
			{% trans 'No courses found' %}
		{% endif %}
		<div class="group">
			<div class="modal" id="removeCourse">
				  <div class="modal-dialog">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
				        <h4 class="modal-title"></h4>
				      </div>
				      <div class="modal-body">
				        <p>Delete your course?</p>
				      </div>
				      <div class="modal-footer">

				        <a href="http://127.0.0.1:8080/html/screens/users/profile_user.html" target="_self"><button type="button" class="btn btn-primary">Confirm</button></a>

				      </div>
				    </div>
				  </div>
				</div>
			</div>
		</div>
{% else %}
	{% if courses|length > 0 %}
		{% if request.GET.category == 'all' or none or request.GET.category == '' %}
			{% for course in courses_student %}
				<div class="col-md-12">
				    <div class="panel panel-info">
				    <!--{% if course.image %}
		  				<img src="{{ course.image_url }}" class="img-responsive" />
		            {% else %}
		            	<img src="" class="img-responsive" />
		            {% endif %} -->
					  <div class="panel-heading">
						  <div class="row">
						  	<div class="col-md-9">
					  			<h3 class="panel-title">{{course.name}}</h3>
					  		</div>
					  		<div class="col-md-3">
					  			<span class="label label-info">{{ course.category }}</span>
								<span class="label label-warning">{{ course.max_students }} {% trans 'students tops' %}</span>
					  		</div>
						  </div>
					  </div>     
					  <div class="panel-body">
					    <p><b>Course Name: </b>{{ course.name }}</p>
					    <p><b>Duration (in semesters): </b>09</p>
					    <p><b>Coordinator: </b>{{course.professors}}</p>
					    <p>
					      <b>Description:</b>
					      <i>
					      {% if couse.description %}
					        {{course.description|linebreaks}}
					      {% else %}
					      	{% trans 'No description' %}
					      {% endif %}
					      </i>
					    </p>

					    <!--{% if user|has_role:'professor, system_admin' %}
							<a href="{% url 'course:update' course.slug %}" class="btn btn-sm btn-primary">
								<span class="glyphicon glyphicon-edit"></span>
							</a>
							<a href="{% url 'course:delete' course.slug %}" class="btn btn-sm btn-danger">
								<span class="glyphicon glyphicon-trash"></span>
							</a>
						{% endif %}-->

					    <a href="{% url 'course:view' course.slug %}" class="btn btn-raised btn-default center-block">View Course</a>
					  </div>
					</div>            
	    		</div>
    		{% endfor %}
    	{% else %}
    		{% for course in courses_student %}
    			{% if course.category.name == request.GET.category %}
    				<div class="col-md-12">
					    <div class="panel panel-info">
					    <!--{% if course.image %}
			  				<img src="{{ course.image_url }}" class="img-responsive" />
			            {% else %}
			            	<img src="" class="img-responsive" />
			            {% endif %} -->
						  <div class="panel-heading">
							  <div class="row">
							  	<div class="col-md-9">
						  			<h3 class="panel-title">{{course.name}}</h3>
						  		</div>
						  		<div class="col-md-3">
						  			<span class="label label-info">{{ course.category }}</span>
									<span class="label label-warning">{{ course.max_students }} {% trans 'students tops' %}</span>
						  		</div>
							  </div>
						  </div>     
						  <div class="panel-body">
						    <p><b>Course Name: </b>{{ course.name }}</p>
						    <p><b>Duration (in semesters): </b>09</p>
						    <p><b>Coordinator: </b>{{course.professors}}</p>
						    <p>
						      <b>Description:</b>
						      <i>
						      {% if couse.description %}
						        {{course.description|linebreaks}}
						      {% else %}
						      	{% trans 'No description' %}
						      {% endif %}
						      </i>
						    </p>

						    <!--{% if user|has_role:'professor, system_admin' %}
								<a href="{% url 'course:update' course.slug %}" class="btn btn-sm btn-primary">
									<span class="glyphicon glyphicon-edit"></span>
								</a>
								<a href="{% url 'course:delete' course.slug %}" class="btn btn-sm btn-danger">
									<span class="glyphicon glyphicon-trash"></span>
								</a>
							{% endif %}-->

						    <a href="{% url 'course:view' course.slug %}" class="btn btn-raised btn-default center-block">View Course</a>
						  </div>
						</div>            
	    			</div>
				{% endif %}
    		{% endfor %}
    	{% endif %}

    	<nav aria-label="Page navigation">
  			<ul class="pagination">
    			{% for page_number in paginator.page_range %}
    				<li{% if page_obj.number == page_number %} class="active"{% endif %}>
        				<a href="?page={{ page_number }}">{{ page_number }}</a>
    				</li>
    			{% endfor %}
  			</ul>
		</nav>
	{% else %}
		{% trans 'No courses found' %}
	{% endif %}
{% endif %}

{% endblock %}
