{% extends 'base.html' %}

{% load static i18n permission_tags %}

{% block breadcrumbs %}

	<ol class="breadcrumb">
	  	<li><a href="{% url 'app:index' %}">{% trans 'Home' %}</a></li>
	  	<li><a href="{% url 'course:view' course.slug %}">{{ course }}</a></li>
	  	{% if user|has_role:'professor' or user|has_role:'system_admin' %}
	  		<li class="active">{% trans 'Manage Subjects' %}</li>
	  	{% else %}
	  		<li class="active">{{ subject.name }}</li>
	  	{% endif %}
	  	
	</ol>
{% endblock %}

{% block sidebar %}
	<div class="panel panel-primary navigation">
        <div class="panel-heading">
            <h5>{% trans 'Menu' %}</h5>
        </div>
        <div class="panel-body">
        	<ul class="nav nav-pills nav-stacked">
              	<li><a href="{% url 'users:profile' %}">{% trans 'Profile' %}</a></li>
              	<li><a href="{% url 'course:manage' %}">{% trans 'My Courses' %}</a></li>
            </ul>
        </div>
    </div>
    

{% endblock %}

{% block content %}
  	<div class="panel panel-info">
    	<div class="panel-heading">
			<div class="row">
	      		<div class="col-md-7 col-sm-7">
	        		<h3>{{subject}}</h3>
	      		</div>
	      		<div class="col-md-2 col-sm-2">
					{% if user|has_role:'system_admin' or user in subject.professors %}
	        			<a href="{% url 'course:update_subject' subject.slug%}" class="btn">{% trans "edit" %}</a>
					{% endif %}
	      		</div>
				<div class="col-md-3 col-sm-3">
					{% if user|has_role:'system_admin' or user in subject.professors %}
	        			<a href="{% url 'course:delete_subject' subject.slug%}" class="btn">{% trans "delete" %}</a>
					{% endif %}
	      		</div>
	    	</div>
    	</div>
    	<div class="panel-body">
      		<p>
        		{{subject.description|linebreaks}}
      		</p>
    	</div>
  	</div>
	
	{% for topic in topics %}
		{% if user|has_role:'system_admin' or topic.owner == user%}
			{% include "subject/form_view_teacher.html" %}
		{% else %}
			{% include "subject/form_view_student.html" %}
		{% endif %}
	{% endfor %}

	{% if user|has_role:'system_admin' or topic.owner == user%}
		<div class="form-group">
            <a href="{% url 'course:create_topic' subject.slug %}" data-toggle="modal" data-target="" class="btn btn-primary btn-lg btn-block btn-raised" name="create_topic">{% trans "Create Topic" %}<div class="ripple-container"></div></a>
          </div>
	{% endif %}	

{% endblock %}

{% block rightbar %}

  <div class="panel panel-warning">
    <div class="panel-heading">
      <h3 class="panel-title">{% trans "Pending Stuffs" %}</h3>
    </div>
    <div class="panel-body">

    </div>
  </div>
{% endblock rightbar %}
