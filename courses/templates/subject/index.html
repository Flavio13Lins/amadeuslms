{% extends 'base.html' %}

{% load static i18n permission_tags %}

{% block breadcrumbs %}

	<ol class="breadcrumb">
	  	<li><a href="{% url 'app:index' %}">{% trans 'Home' %}</a></li>
	  	<li><a href="{% url 'course:view' course.slug %}">{{ course }}</a></li>
	  	<li class="active">{% trans 'Manage Subjects' %}</li>
	</ol>
{% endblock %}

{% block sidebar %}

    <div class="panel panel-primary">

      <div class="panel-heading">
        <h3 class="panel-title">{{course}}</h3>
      </div>

      <div class="panel-body">
        {% for subject in subjects %}
				<div class="row">
					<div class="col-md-12 col-sm-12">
						<a href="{% url 'course:view_subject' subject.slug%}" class="btn btn-default text-left">{{subject}}</a>
					</div>
				</div>
        {% endfor %}
      </div>
    </div>

		{% if user|has_role:'system_admin' or user|has_role:'professor' %}
			<a href="{% url 'course:create_subject' course.slug %}" class="btn btn-primary btn-md btn-block">{% trans "Create Subject" %}</a>
		{% endif %}
{% endblock %}

{% block content %}
  <div class="panel panel-info">
    <div class="panel-heading">
			<div class="row">
	      <div class="col-md-7 col-sm-7">
	        <h3>{{subject}}</h3>
	      </div>
	      <div class="col-md-2 col-sm-2">
					{% if user|has_role:'system_admin' or user in subject.professors %}
	        	<a href="{% url 'course:update_subject' subject.slug%}" class="btn">{% trans "edit" %}</a>
					{% endif %}
	      </div>
				<div class="col-md-3 col-sm-3">
					{% if user|has_role:'system_admin' or user in subject.professors %}
	        	<a href="{% url 'course:delete_subject' subject.slug%}" class="btn">{% trans "delete" %}</a>
					{% endif %}
	      </div>
	    </div>
    </div>
    <div class="panel-body">
      <p>
        {{subject.description|linebreaks}}
      </p>
    </div>
  </div>
{% for topic in topics %}
	{% if user|has_role:'system_admin' or topic.owner == user%}
		{% include "subject/form_view_teacher.html" %}
	{% else %}
		{% include "subject/form_view_student.html" %}
	{% endif %}
{% endfor %}

	<a name="create_topic" class="btn btn-primary btn-md btn-block" href="{% url 'course:create_topic' subject.slug %}">{% trans "Create Topic" %}</a>
{% endblock %}

{% block rightbar %}

  <div class="panel panel-warning">
    <div class="panel-heading">
      <h3 class="panel-title">{% trans "Pending Stuffs" %}</h3>
    </div>
    <div class="panel-body">

    </div>
  </div>
{% endblock rightbar %}
