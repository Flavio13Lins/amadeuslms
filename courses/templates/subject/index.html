{% extends 'base.html' %}

{% load static i18n permission_tags %}

{% block breadcrumbs %}

	<ol class="breadcrumb">
	  	<li><a href="{% url 'app:index' %}">{% trans 'Home' %}</a></li>
	  	<li><a href="{% url 'course:view' course.slug %}">{{ course }}</a></li>
	  	{% if user|has_role:'professor' or user|has_role:'system_admin' %}
	  		<li class="active">{% trans 'Manage Subjects' %}</li>
	  	{% else %}
	  		<li class="active">{{ subject.name }}</li>
	  	{% endif %}
	  	
	</ol>
{% endblock %}

{% block sidebar %}
	<div class="panel panel-primary navigation">
        <div class="panel-heading">
            <h5>{% trans 'Menu' %}</h5>
        </div>
        <div class="panel-body">
        	<ul class="nav nav-pills nav-stacked">
              	<li><a href="{% url 'users:profile' %}">{% trans 'Profile' %}</a></li>
              	<li><a href="{% url 'course:manage' %}">{% trans 'My Courses' %}</a></li>
            </ul>
        </div>
    </div>
    

{% endblock %}

{% block content %}
  	<div class="panel panel-info">
    	<div class="panel-heading">
			<div class="row">
	      		<div class="col-md-9 col-sm-7">
	        		<h3>{{subject}}</h3>
	      		</div>
		          <div class="col-xs-4 col-md-3 divMoreActions">
		            <div class="btn-group">
		              <button type="button" class="btn btn-default btn-sm eye" data-toggle="tooltip" data-placement="bottom" title="Visible">
		                <i class="fa fa-eye fa-2x" aria-hidden="true"></i>
		              </button>
		            </div>
		            {% if user|has_role:'system_admin' or user in subject.professors %}
			            <div class="btn-group">
			              <button class="btn btn-default btn-sm dropdown-toggle" type="button" id="moreActions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			                <i class="fa fa-ellipsis-v fa-2x" aria-hidden="true"></i>
			              </button>
			              <ul class="dropdown-menu pull-right" aria-labelledby="moreActions">
			                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#myModal4"><i class="fa fa-files-o fa-fw" aria-hidden="true"></i>&nbsp; {% trans "Replicate" %}</a></li>
			                <li><a href="{% url 'course:update_subject' subject.slug %}" data-toggle="modal" data-target="#editSubject"><i class="fa fa-pencil fa-fw" aria-hidden="true"></i>&nbsp; {% trans "Edit" %}</a></li>
			                <li><a href="{% url 'course:delete_subject' subject.slug %}" data-toggle="modal" data-target="#removeSubject"><i class="fa fa-trash fa-fw" aria-hidden="true"></i>&nbsp; {% trans "Remove" %}</a></li>
			              </ul>
			            </div>
		            {% endif %}
				</div>
	    	</div>
    	</div>
    	<div class="panel-body">
	      <p><b>Professor:</b> {{subject.professors}}</p>
	      <p>
	        <b>Description:</b>
	          {{subject.description|linebreaks}}
	      </p>
	      <div class="row">
	        <div class="col-xs-6 col-md-6">
	          <p><b>Begining:</b> {{subject.init_date}}</p>
	        </div>
	        <div class="col-xs-6 col-md-6">
	          <p><b>End:</b> {{subject.end_date}}</p>
	        </div>
	      </div>
	    </div>
	</div>
	
	{% for topic in topics %}
		{% if user|has_role:'system_admin' or topic.owner == user%}
			{% include "subject/form_view_teacher.html" %}
		{% else %}
			{% include "subject/form_view_student.html" %}
		{% endif %}
	{% endfor %}

	{% if user|has_role:'system_admin' or topic.owner == user%}
		<div class="form-group">
            <a href="{% url 'course:create_topic' subject.slug %}" data-toggle="modal" data-target="" class="btn btn-primary btn-lg btn-block btn-raised" name="create_topic">{% trans "Create Topic" %}<div class="ripple-container"></div></a>
          </div>
	{% endif %}	

{% endblock %}

{% block rightbar %}

  <div class="panel panel-warning">
    <div class="panel-heading">
      <h3 class="panel-title">{% trans "Pending Stuffs" %}</h3>
    </div>
    <div class="panel-body">

    </div>
  </div>
{% endblock rightbar %}
