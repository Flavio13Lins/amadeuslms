{% extends 'subjects/view.html' %}

{% load static i18n pagination permissions_tags subject_counter %}
{% load django_bootstrap_breadcrumbs %}

{% block style %}
	{{block.super}}
	<link rel="stylesheet" type="text/css" href="{% static 'css/dataTables.bootstrap.css' %}">
{% endblock %}

{% block javascript%}
	{{ block.super }}
	<script type="text/javascript" src="{% static 'js/jquery.dataTables.js' %} "></script>
	<script type="text/javascript" src="{% static 'js/dataTables.bootstrap.js' %} "></script>
{% endblock%}

{% block breadcrumbs %}
	{{ block.super }}
	{% breadcrumb topic 'subjects:topic_view' subject.slug topic.slug %}
	{% breadcrumb goal 'goals:submit' goal.slug %}

	{% trans 'Reports: Answered' as bread %}
	{% breadcrumb bread 'goals:answered_reports' goal.slug %}	
{% endblock %}

{% block content %}
	{% resource_permissions request.user goal as has_resource_permissions %}

    {% if goal.visible %}
		<div class="panel panel-info topic-panel">
        	<div class="panel-heading">
	{% elif has_resource_permissions %}
		<div class="panel panel-info topic-panel-invisible">
        	<div class="panel-heading panel-invisible">
    {% endif %}
				<div class="row">
					<div class="col-md-12 category-header">
						<h4 class="panel-title" style="margin-top: 10px; margin-bottom: 8px">
							<span>{{ goal }}</span>
						</h4>

						<div class="col-md-5 pull-right category-card-items">
							<a href="{% url 'mural:resource_view' goal.slug %}" class="pull-right action_icon">
								<i class="fa fa-list" aria-hidden="true"></i>
								{% resource_mural_number goal request.user %}
							</a>
						</div>
					</div>
				</div>
			</div>
			<div id="reports" class="panel-collapse in collapse category-panel-content">
				<div id="core-subjects-options-div">
			        <ul class="core-subjects-options">
		                <a href=""><li class="answered_link active">{% trans "Answered" %} ({{ totals.answered }})</li></a>
		                <a href=""><li class="">{% trans "Unanswered" %} ({{ totals.unanswered }})</li></a>
		                <a href=""><li class="">{% trans "Resource History" %}</li></a>
			        </ul>
			    </div>

		        <div class="answered" data-url="{% url 'goals:answered_report' goal.slug %}">
			    	<div class="answered_data"></div>
			    	<div class="text-center">
			    		<div class="holder"></div>
			    	</div>
			    </div>
			</div>
		</div>

		<script type="text/javascript">
			var dataTablei18n = {
		        "decimal":        "",
		        "emptyTable":     "{% trans 'No data available in table' %}",
		        "info":           "{% trans 'Showing _START_ to _END_ of _TOTAL_ entries' %}",
		        "infoEmpty":      "{% trans 'Showing 0 to 0 of 0 entries' %}",
		        "infoFiltered":   "{% trans '(filtered from _MAX_ total entries)' %}",
		        "infoPostFix":    "",
		        "thousands":      ",",
		        "lengthMenu":     "{% trans 'Show _MENU_ entries' %}",
		        "loadingRecords": "{% trans 'Loading...' %}",
		        "processing":     "{% trans 'Processing...' %}",
		        "search":         "{% trans 'Search' %}:",
		        "zeroRecords":    "{% trans 'No matching records found' %}",
		        "paginate": {
		            "first":      "{% trans 'First' %}",
		            "last":       "{% trans 'Last' %}",
		            "next":       "»",
		            "previous":   "«"
		        },
		        "aria": {
		            "sortAscending":  "{% trans ': activate to sort column ascending' %}",
		            "sortDescending": "{% trans ': activate to sort column descending' %}"
		        }
		    }
		</script>
		<script type="text/javascript" src="{% static 'js/goals_reports.js' %}"></script>
{% endblock %}